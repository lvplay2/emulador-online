<html>
    <head>
         <meta name="viewport" content="width=device-width, initial-scale=1" />
         <link rel="preconnect" href="https://fonts.googleapis.com">
         <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
         <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
        <title>Emulador Online</title>
        <style>
            h1 {
                font-family: "Roboto", system-ui;
                text-align: center;
            }
            p {
                font-family: "Roboto", system-ui;
                text-align: center;
            }
            h4 {
                font-family: "Roboto", system-ui;
                text-align: center;
            }
            body {
                margin: 0;
                padding: 0;
                background-color: black;
                color: white;
                background-image: url('emulatorjs.png');
                background-size: cover;
                background-repeat: no-repeat;
            }


            input {
                background-color: black;
                color: white;
                font-family: 'Main', sans-serif;
            }

            button {
                color: white;
                font-family: "Roboto", sans-serif;
                align-content: center;
                background-color: black;
                border: 2px solid white;
                border-radius: 16px;
            }

            .box {
                font-family: 'Main';
                text-align: center;
                padding-top: 20px;
            }

        </style>
    </head>

    <body>
        <div id="box" style="text-align: center; padding-top: 20px;">
            <h1>Emulador Online</h1>
            <p>¡Sube aquí roms de juegos y ejecútalos con emulatorjs!</p>
            <p>¡Este emulador puede correr juegos de PS1, Arcade, NES, DS, N64, Game Boy, Atari y más!</p>
            <input type="file" id="input">
        </div>

        <script>
            input.onchange = async () => {
                const url = new Blob([input.files[0]])
                const parts = input.files[0].name.split(".")

                const core = await (async (ext) => {
                    if (["fds", "nes", "unif", "unf"].includes(ext))
                        return "nes"

                    if (["smc", "fig", "sfc", "gd3", "gd7", "dx2", "bsx", "swc"].includes(ext))
                        return "snes"

                    if (["z64", "n64"].includes(ext))
                        return "n64"

                    if (["pce"].includes(ext))
                        return "pce"

                    if (["ngp", "ngc"].includes(ext))
                        return "ngp"

                    if (["ws", "wsc"].includes(ext))
                        return "ws"

                    if (["col", "cv"].includes(ext))
                        return "coleco"

                    if (["nds", "gba", "gb", "z64", "n64"].includes(ext))
                        return ext

                    return await new Promise(resolve => {
                        const cores = {
                            "Nintendo 64": "n64",
                            "Nintendo Game Boy": "gb",
                            "Nintendo Game Boy Advance": "gba",
                            "Nintendo DS": "nds",
                            "NES": "nes",
                            "SNES": "snes",
                            "PS1": "psx",
                            "Virtual Boy": "vb",
                            "Sega Mega Drive": "segaMD",
                            "Sega Master System": "segaMS",
                            "Sega CD": "segaCD",
                            "Atari Lynx": "lynx",
                            "Commodore 64": "c64",
                            "Commodore 128": "c128",
                            "Commodore Amiga": "amiga",
                            "Commodore PET": "pet",
                            "Commodore Plus/4": "plus4",
                            "Commodore VIC-20": "vic20",
                            "Arcade": "arcade",
                            "3DO": "3do",
                            "MAME 2003": "mame2003",
                            "Sega 32X": "sega32x",
                            "Atari Jaguar": "jaguar",
                            "Sega Game Gear": "segaGG",
                            "Sega Saturn": "segaSaturn",
                            "Atari 7800": "atari7800",
                            "Atari 2600": "atari2600",
                            "NEC TurboGrafx-16/SuperGrafx/PC Engine": "pce",
                            "NEC PC-FX": "pcfx",
                            "SNK NeoGeo Pocket (Color)": "ngp",
                            "Bandai WonderSwan (Color)": "ws",
                            "ColecoVision": "coleco"
                        }

                        const button = document.createElement("button");
                        button.classList.add("emu-button");

                        const select = document.createElement("select");
                        select.classList.add("emu-select");


                        for (const type in cores) {
                            const option = document.createElement("option")

                            option.value = cores[type]
                            option.textContent = type
                            select.appendChild(option)
                        }

                        button.onclick = () => resolve(select[select.selectedIndex].value)
                        button.textContent = "Load game"
                        box.innerHTML = ""

                        box.appendChild(select)
                        box.appendChild(button)
                    })
                })(parts.pop())

                const div = document.createElement("div")
                const sub = document.createElement("div")
                const script = document.createElement("script")

                sub.id = "game"
                div.id = "display"

                box.remove()
                div.appendChild(sub)
                document.body.appendChild(div)

                window.EJS_player = "#game";
                window.EJS_gameName = parts.shift();
                window.EJS_biosUrl = "";
                window.EJS_gameUrl = url;
                window.EJS_core = core;
                window.EJS_pathtodata = "/data";
                window.EJS_startOnLoaded = true;

                script.src = "/data/loader.js";
                document.body.appendChild(script);
            }
            function detectAdBlock(url) {
                let adBlockEnabled = false;
                try {
                    window.EJS_AdUrl = document.querySelector('iframe[src="' + window.EJS_AdUrl + '"]').src;
                } catch (e) {
                    adBlockEnabled = true;
                }
                if (adBlockEnabled) {
                    window.EJS_adBlocked(url);
                }
            }
            box.ondragover = () => box.setAttribute("drag", true);
            box.ondragleave = () => box.removeAttribute("drag");
        </script>
        <h4>(Código original hecho por a456pur para Seraph. Código transformado por Mati555.)</h4>
        </div>
    </body>
</html>
